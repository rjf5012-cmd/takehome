<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Paycheck Take Home Calculator | PaycheckTakeHome.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="PaycheckTakeHome.com helps you estimate your take-home pay after taxes and deductions. Simple net pay calculator for salary or hourly workers in every US state." />
  <link rel="icon" href="favicon.ico" />

  <!-- Google AdSense (your snippet) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8509398148166447"
     crossorigin="anonymous"></script>

  <style>
    :root {
      --bg: #f5f7fb;
      --card-bg: #ffffff;
      --accent: #2563eb;
      --accent-soft: #e0ebff;
      --accent-dark: #1d4ed8;
      --text: #111827;
      --muted: #6b7280;
      --border: #e5e7eb;
      --danger: #dc2626;
      --success: #16a34a;
      --shadow-soft: 0 20px 40px rgba(15, 23, 42, 0.08);
      --radius: 14px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(180deg, #eef2ff 0%, #f9fafb 50%, #f3f4ff 100%);
      color: var(--text);
    }

    .page {
      max-width: 960px;
      margin: 0 auto;
      padding: 24px 16px 48px;
    }

    header {
      text-align: center;
      margin-bottom: 32px;
    }

    header h1 {
      font-size: clamp(1.9rem, 3vw, 2.4rem);
      margin: 0 0 8px;
      letter-spacing: -0.03em;
    }

    header p.subheading {
      margin: 0;
      color: var(--muted);
      font-size: 0.98rem;
    }

    header .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.08);
      color: var(--accent-dark);
      font-size: 0.78rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    header .pill span.dots {
      display: inline-flex;
      gap: 2px;
    }

    header .pill span.dots span {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: var(--accent-dark);
      opacity: 0.7;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 24px;
    }

    @media (max-width: 768px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      padding: 20px 18px;
      border: 1px solid rgba(148, 163, 184, 0.18);
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 1.1rem;
    }

    .card p.helper {
      margin: 0 0 16px;
      font-size: 0.86rem;
      color: var(--muted);
    }

    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      margin-bottom: 14px;
    }

    .form-group {
      flex: 1 1 140px;
      min-width: 130px;
    }

    .form-group label {
      display: block;
      font-size: 0.82rem;
      font-weight: 600;
      margin-bottom: 4px;
      color: #4b5563;
    }

    .form-group small {
      display: block;
      font-size: 0.74rem;
      color: var(--muted);
    }

    input[type="number"],
    input[type="text"],
    select {
      width: 100%;
      padding: 8px 9px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 0.9rem;
      outline: none;
      background-color: #f9fafb;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease;
    }

    input[type="number"]:focus,
    input[type="text"]:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.2);
      background-color: #ffffff;
    }

    .radio-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .radio-chip {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 0.82rem;
      cursor: pointer;
      background: #f9fafb;
      transition: background 0.15s ease, border-color 0.15s ease, box-shadow 0.15s ease;
    }

    .radio-chip input {
      margin: 0;
    }

    .radio-chip.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.12);
    }

    .section-label {
      margin-top: 10px;
      margin-bottom: 4px;
      font-size: 0.8rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--muted);
    }

    .disclaimer {
      font-size: 0.76rem;
      color: var(--muted);
      margin-top: 4px;
    }

    .toggle-section {
      border-top: 1px dashed var(--border);
      margin-top: 12px;
      padding-top: 8px;
    }

    .toggle-header {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--accent-dark);
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.06);
      margin-bottom: 6px;
    }

    .toggle-header span.chevron {
      font-size: 0.9rem;
      transition: transform 0.15s ease;
    }

    .toggle-header.open span.chevron {
      transform: rotate(90deg);
    }

    .toggle-content {
      display: none;
      margin-top: 6px;
    }

    .toggle-content.open {
      display: block;
      animation: fadeIn 0.15s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-2px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      width: 100%;
      padding: 10px 12px;
      margin-top: 8px;
      border-radius: 999px;
      border: none;
      outline: none;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: #ffffff;
      font-size: 0.96rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.35);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 30px rgba(37, 99, 235, 0.45);
      filter: brightness(1.02);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
    }

    .btn-primary span.icon {
      font-size: 1rem;
    }

    .error-message {
      margin-top: 6px;
      font-size: 0.78rem;
      color: var(--danger);
      display: none;
    }

    /* Results Card */
    .result-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
    }

    .result-pill {
      font-size: 0.74rem;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.08);
      color: var(--success);
      font-weight: 600;
    }

    .net-pay {
      font-size: 1.4rem;
      font-weight: 700;
      margin: 0;
    }

    .net-sub {
      margin: 2px 0 0;
      font-size: 0.82rem;
      color: var(--muted);
    }

    .net-sub strong {
      color: var(--text);
    }

    .breakdown-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      font-size: 0.82rem;
    }

    .breakdown-table thead {
      background: #f3f4ff;
    }

    .breakdown-table th,
    .breakdown-table td {
      padding: 6px 8px;
      text-align: left;
      border-bottom: 1px solid var(--border);
      white-space: nowrap;
    }

    .breakdown-table th:last-child,
    .breakdown-table td:last-child {
      text-align: right;
    }

    .breakdown-table th:nth-child(2),
    .breakdown-table td:nth-child(2) {
      text-align: right;
    }

    .breakdown-table tr.total-row td {
      font-weight: 700;
      border-top: 2px solid var(--border);
      background: #f9fafb;
    }

    .result-footnote {
      margin-top: 10px;
      font-size: 0.74rem;
      color: var(--muted);
    }

    .result-footnote strong {
      color: var(--text);
    }

    .adsense-slot {
      margin: 16px 0 4px;
      padding-top: 10px;
      border-top: 1px dashed var(--border);
      font-size: 0.74rem;
      text-align: center;
      color: var(--muted);
    }

    /* FAQ & SEO content */
    .faq-card {
      margin-top: 24px;
      padding: 18px 18px 16px;
    }

    .faq-card h2 {
      font-size: 1rem;
      margin: 0 0 10px;
    }

    details {
      border-radius: 10px;
      border: 1px solid var(--border);
      padding: 8px 10px;
      margin-bottom: 8px;
      background: #f9fafb;
    }

    summary {
      cursor: pointer;
      font-size: 0.86rem;
      font-weight: 600;
      color: #374151;
      list-style: none;
    }

    summary::-webkit-details-marker {
      display: none;
    }

    summary::before {
      content: "‚Ä∫";
      display: inline-block;
      margin-right: 6px;
      transform: rotate(90deg);
      transition: transform 0.15s ease;
      opacity: 0.6;
    }

    details[open] summary::before {
      transform: rotate(270deg);
    }

    details p {
      margin: 6px 0 4px;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .footer-note {
      margin-top: 20px;
      font-size: 0.75rem;
      color: var(--muted);
      text-align: center;
    }

    /* Make breakdown table scrollable on small screens */
    .table-wrapper {
      margin-top: 8px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="pill">
        <span class="dots"><span></span><span></span><span></span></span>
        PaycheckTakeHome.com ¬∑ Simple US net pay estimator
      </div>
      <h1>Paycheck Take Home Calculator</h1>
      <p class="subheading">
        Estimate your paycheck after taxes and deductions. Choose salary or hourly, select your state, and see your net pay in seconds.
      </p>
    </header>

    <main class="layout">
      <!-- Calculator Card -->
      <section class="card" aria-labelledby="calc-heading">
        <h2 id="calc-heading">Enter your pay details</h2>
        <p class="helper">We‚Äôll estimate your federal, state, and FICA taxes using simplified assumptions for the current tax year.</p>

        <!-- Pay type -->
        <div class="section-label">Pay type</div>
        <div class="radio-row" id="payTypeRow">
          <label class="radio-chip active">
            <input type="radio" name="payType" value="salary" checked />
            Salary
          </label>
          <label class="radio-chip">
            <input type="radio" name="payType" value="hourly" />
            Hourly
          </label>
        </div>

        <!-- Income rows -->
        <div id="salaryRow" class="form-row">
          <div class="form-group">
            <label for="annualSalary">Annual salary</label>
            <input type="number" id="annualSalary" placeholder="e.g. 75000" min="0" step="1000" />
            <small>Before taxes and deductions</small>
          </div>
        </div>

        <div id="hourlyRow" class="form-row" style="display:none;">
          <div class="form-group">
            <label for="hourlyRate">Hourly rate</label>
            <input type="number" id="hourlyRate" placeholder="e.g. 25" min="0" step="0.25" />
          </div>
          <div class="form-group">
            <label for="hoursPerWeek">Hours per week</label>
            <input type="number" id="hoursPerWeek" placeholder="e.g. 40" min="0" step="1" />
          </div>
        </div>

        <!-- Core settings -->
        <div class="form-row">
          <div class="form-group">
            <label for="payFrequency">Pay frequency</label>
            <select id="payFrequency">
              <option value="biweekly">Every 2 weeks (Bi-weekly)</option>
              <option value="semimonthly">Twice per month (Semi-monthly)</option>
              <option value="monthly">Monthly</option>
              <option value="weekly">Weekly</option>
            </select>
          </div>
          <div class="form-group">
            <label for="state">State</label>
            <select id="state">
              <option value="PA" selected>Pennsylvania</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="DC">District of Columbia</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>
          </div>
          <div class="form-group">
            <label for="filingStatus">Filing status</label>
            <select id="filingStatus">
              <option value="single">Single</option>
              <option value="married">Married filing jointly</option>
            </select>
          </div>
        </div>

        <!-- Pre-tax deductions -->
        <div class="toggle-section">
          <div id="pretaxToggle" class="toggle-header">
            <span class="chevron">‚Ä∫</span>
            Pre-tax deductions (401(k), HSA, etc.)
          </div>
          <div id="pretaxContent" class="toggle-content">
            <div class="form-row">
              <div class="form-group">
                <label for="k401Percent">401(k) contribution %</label>
                <input type="number" id="k401Percent" placeholder="e.g. 5" min="0" max="100" step="0.5" />
                <small>Percent of gross pay each period</small>
              </div>
              <div class="form-group">
                <label for="hsaPerPay">HSA/FSA per paycheck ($)</label>
                <input type="number" id="hsaPerPay" placeholder="e.g. 75" min="0" step="1" />
              </div>
              <div class="form-group">
                <label for="otherPretaxPerPay">Other pre-tax per paycheck ($)</label>
                <input type="number" id="otherPretaxPerPay" placeholder="e.g. 50" min="0" step="1" />
              </div>
            </div>
          </div>
        </div>

        <!-- Post-tax deductions -->
        <div class="toggle-section">
          <div id="posttaxToggle" class="toggle-header">
            <span class="chevron">‚Ä∫</span>
            Post-tax deductions (benefits, etc.)
          </div>
          <div id="posttaxContent" class="toggle-content">
            <div class="form-row">
              <div class="form-group">
                <label for="healthPerPay">Health / dental per paycheck ($)</label>
                <input type="number" id="healthPerPay" placeholder="e.g. 100" min="0" step="1" />
              </div>
              <div class="form-group">
                <label for="otherPostPerPay">Other after-tax per paycheck ($)</label>
                <input type="number" id="otherPostPerPay" placeholder="e.g. 50" min="0" step="1" />
              </div>
            </div>
          </div>
        </div>

        <p class="disclaimer">
          This tool provides a simplified estimate only and does not replace tax or payroll advice. Actual paychecks may differ.
        </p>

        <button id="calculateBtn" class="btn-primary" type="button">
          <span class="icon">üßÆ</span>
          <span>Calculate my take-home pay</span>
        </button>
        <div id="errorMessage" class="error-message"></div>
      </section>

      <!-- Results Card -->
      <section class="card" aria-live="polite">
        <div class="result-header">
          <div>
            <p class="net-pay" id="netPerPayDisplay">$0.00</p>
            <p class="net-sub" id="netSubDisplay">
              Per paycheck ¬∑ Monthly: <strong>$0.00</strong> ¬∑ Yearly: <strong>$0.00</strong>
            </p>
          </div>
          <div class="result-pill">
            Estimated net pay
          </div>
        </div>

        <div class="table-wrapper">
          <table class="breakdown-table">
            <thead>
              <tr>
                <th>Item</th>
                <th>Per paycheck</th>
                <th>Per year</th>
              </tr>
            </thead>
            <tbody id="breakdownBody">
              <tr>
                <td>Gross pay</td>
                <td id="grossPerPayCell">$0.00</td>
                <td id="grossAnnualCell">$0.00</td>
              </tr>
              <tr>
                <td>Pre-tax deductions</td>
                <td id="pretaxPerPayCell">-$0.00</td>
                <td id="pretaxAnnualCell">-$0.00</td>
              </tr>
              <tr>
                <td>Federal income tax</td>
                <td id="federalPerPayCell">-$0.00</td>
                <td id="federalAnnualCell">-$0.00</td>
              </tr>
              <tr>
                <td>State income tax</td>
                <td id="statePerPayCell">-$0.00</td>
                <td id="stateAnnualCell">-$0.00</td>
              </tr>
              <tr>
                <td>Social Security</td>
                <td id="ssPerPayCell">-$0.00</td>
                <td id="ssAnnualCell">-$0.00</td>
              </tr>
              <tr>
                <td>Medicare</td>
                <td id="medicarePerPayCell">-$0.00</td>
                <td id="medicareAnnualCell">-$0.00</td>
              </tr>
              <tr>
                <td>Post-tax deductions</td>
                <td id="posttaxPerPayCell">-$0.00</td>
                <td id="posttaxAnnualCell">-$0.00</td>
              </tr>
              <tr class="total-row">
                <td>Net (take-home pay)</td>
                <td id="netPerPayCell">$0.00</td>
                <td id="netAnnualCell">$0.00</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="result-footnote" id="resultFootnote">
          Enter your information on the left and click ‚ÄúCalculate‚Äù to see your estimated net pay.
        </div>

        <!-- AdSense slot -->
        <div class="adsense-slot">
          <!-- AdSense unit placeholder. Uncomment data-ad-slot and set your slot ID when ready.
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-8509398148166447"
               <!-- data-ad-slot="YOUR_AD_SLOT_ID" -->
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
          -->
          <em>Ad space reserved. Add your AdSense slot ID here when you're ready to run ads.</em>
        </div>
      </section>
    </main>

    <!-- FAQ / SEO content -->
    <section class="card faq-card">
      <h2>Frequently asked questions</h2>

      <details>
        <summary>How accurate is this take-home pay calculator?</summary>
        <p>
          This tool uses simplified U.S. federal tax brackets, approximate state income tax rates, and standard Social Security and Medicare rates to estimate your net pay.
          Your actual paycheck may differ based on your employer‚Äôs specific payroll settings, local taxes, pre-tax benefits, and other factors.
        </p>
      </details>

      <details>
        <summary>What taxes are included in the estimate?</summary>
        <p>
          We include estimated federal income tax, state income tax, Social Security, and Medicare. We do not include city or local taxes, special surtaxes, or unique deductions that may apply to your situation.
        </p>
      </details>

      <details>
        <summary>What is the difference between gross pay and net (take-home) pay?</summary>
        <p>
          Gross pay is what you earn before any taxes or deductions. Net pay is what actually lands in your bank account after taxes and any pre-tax or post-tax deductions.
        </p>
      </details>

      <details>
        <summary>How do pre-tax deductions like 401(k) and HSA affect my paycheck?</summary>
        <p>
          Pre-tax deductions are taken out before income taxes are calculated. This usually reduces your taxable income and can lower your federal and state income taxes, while still allowing you to save for retirement or medical expenses.
        </p>
      </details>

      <details>
        <summary>Should I use this instead of my paycheck or tax software?</summary>
        <p>
          No. This calculator is meant for quick planning and rough estimates only. For official numbers, rely on your employer‚Äôs payroll, your pay stubs, and tax software or a tax professional.
        </p>
      </details>
    </section>

    <p class="footer-note">
      ¬© <span id="yearSpan"></span> PaycheckTakeHome.com ¬∑ This calculator is for informational purposes only and does not constitute financial, tax, or legal advice.
    </p>
  </div>

  <script>
    // Currency formatter
    const fmt = new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      maximumFractionDigits: 2
    });

    function getPeriodsPerYear(freq) {
      switch (freq) {
        case 'weekly': return 52;
        case 'biweekly': return 26;
        case 'semimonthly': return 24;
        case 'monthly': return 12;
        default: return 26;
      }
    }

    // Approximate state effective income tax rates (rough averages, not official)
    const stateEffectiveRates = {
      AL: 0.03, AK: 0.0,  AZ: 0.035, AR: 0.035, CA: 0.06,  CO: 0.042,
      CT: 0.05, DE: 0.045, DC: 0.055, FL: 0.0,  GA: 0.04,  HI: 0.06,
      ID: 0.045, IL: 0.045, IN: 0.033, IA: 0.04, KS: 0.045, KY: 0.045,
      LA: 0.03, ME: 0.045, MD: 0.047, MA: 0.05, MI: 0.042, MN: 0.055,
      MS: 0.03, MO: 0.035, MT: 0.045, NE: 0.045, NV: 0.0,  NH: 0.0,
      NJ: 0.05, NM: 0.04,  NY: 0.06,  NC: 0.043, ND: 0.03,  OH: 0.035,
      OK: 0.035, OR: 0.07,  PA: 0.031, RI: 0.045, SC: 0.04,  SD: 0.0,
      TN: 0.0,  TX: 0.0,  UT: 0.045, VT: 0.055, VA: 0.045, WA: 0.0,
      WV: 0.04, WI: 0.045, WY: 0.0
    };

    // Simple US federal tax estimate using rough 2024 brackets
    function estimateFederalTax(annualTaxable, filingStatus) {
      if (annualTaxable <= 0) return 0;

      // Brackets: [ [limit, rate], ... ] for each status
      let brackets;
      if (filingStatus === 'married') {
        brackets = [
          [23200, 0.10],
          [94300, 0.12],
          [201050, 0.22],
          [383900, 0.24],
          [487450, 0.32],
          [731200, 0.35],
          [Infinity, 0.37]
        ];
      } else {
        // single
        brackets = [
          [11600, 0.10],
          [47150, 0.12],
          [100525, 0.22],
          [191950, 0.24],
          [243725, 0.32],
          [609350, 0.35],
          [Infinity, 0.37]
        ];
      }

      let remaining = annualTaxable;
      let lastLimit = 0;
      let tax = 0;

      for (const [limit, rate] of brackets) {
        if (remaining <= 0) break;
        const taxableAtThisRate = Math.min(remaining, limit - lastLimit);
        tax += taxableAtThisRate * rate;
        remaining -= taxableAtThisRate;
        lastLimit = limit;
      }

      return tax;
    }

    function calculate() {
      const payType = document.querySelector('input[name="payType"]:checked')?.value;
      const salaryInput = document.getElementById('annualSalary');
      const hourlyRateInput = document.getElementById('hourlyRate');
      const hoursPerWeekInput = document.getElementById('hoursPerWeek');
      const payFrequency = document.getElementById('payFrequency').value;
      const state = document.getElementById('state').value;
      const filingStatus = document.getElementById('filingStatus').value;

      const k401Percent = parseFloat(document.getElementById('k401Percent').value) || 0;
      const hsaPerPay = parseFloat(document.getElementById('hsaPerPay').value) || 0;
      const otherPretaxPerPay = parseFloat(document.getElementById('otherPretaxPerPay').value) || 0;
      const healthPerPay = parseFloat(document.getElementById('healthPerPay').value) || 0;
      const otherPostPerPay = parseFloat(document.getElementById('otherPostPerPay').value) || 0;

      const errorEl = document.getElementById('errorMessage');
      errorEl.style.display = 'none';
      errorEl.textContent = '';

      let grossAnnual = 0;

      if (payType === 'salary') {
        const annualSalary = parseFloat(salaryInput.value);
        if (isNaN(annualSalary) || annualSalary <= 0) {
          errorEl.textContent = 'Please enter a valid annual salary greater than 0.';
          errorEl.style.display = 'block';
          return;
        }
        grossAnnual = annualSalary;
      } else {
        const hourlyRate = parseFloat(hourlyRateInput.value);
        const hoursPerWeek = parseFloat(hoursPerWeekInput.value);
        if (isNaN(hourlyRate) || hourlyRate <= 0 || isNaN(hoursPerWeek) || hoursPerWeek <= 0) {
          errorEl.textContent = 'Please enter a valid hourly rate and hours per week.';
          errorEl.style.display = 'block';
          return;
        }
        grossAnnual = hourlyRate * hoursPerWeek * 52;
      }

      const periodsPerYear = getPeriodsPerYear(payFrequency);
      const grossPerPay = grossAnnual / periodsPerYear;

      const k401AmountPerPay = grossPerPay * (k401Percent / 100);
      const pretaxPerPay = k401AmountPerPay + hsaPerPay + otherPretaxPerPay;
      const pretaxAnnual = pretaxPerPay * periodsPerYear;

      const taxableAnnual = Math.max(0, grossAnnual - pretaxAnnual);

      // FICA (approximate)
      const ssWageBase = 168600; // approximate for recent tax year
      const ssTaxAnnual = Math.min(grossAnnual, ssWageBase) * 0.062;
      const medicareTaxAnnual = grossAnnual * 0.0145;

      // State tax (approximate effective rate)
      const stateRate = stateEffectiveRates[state] ?? 0.04;
      const stateTaxAnnual = taxableAnnual * stateRate;

      // Federal tax (simplified)
      const federalTaxAnnual = estimateFederalTax(taxableAnnual, filingStatus);

      const posttaxPerPay = healthPerPay + otherPostPerPay;
      const posttaxAnnual = posttaxPerPay * periodsPerYear;

      const totalTaxesAnnual = federalTaxAnnual + stateTaxAnnual + ssTaxAnnual + medicareTaxAnnual;
      const netAnnual = Math.max(0, grossAnnual - pretaxAnnual - totalTaxesAnnual - posttaxAnnual);
      const netPerPay = netAnnual / periodsPerYear;
      const netMonthly = netAnnual / 12;

      // Update UI
      document.getElementById('grossPerPayCell').textContent = fmt.format(grossPerPay);
      document.getElementById('grossAnnualCell').textContent = fmt.format(grossAnnual);

      document.getElementById('pretaxPerPayCell').textContent = '-' + fmt.format(pretaxPerPay);
      document.getElementById('pretaxAnnualCell').textContent = '-' + fmt.format(pretaxAnnual);

      const federalPerPay = federalTaxAnnual / periodsPerYear;
      document.getElementById('federalPerPayCell').textContent = '-' + fmt.format(federalPerPay);
      document.getElementById('federalAnnualCell').textContent = '-' + fmt.format(federalTaxAnnual);

      const statePerPay = stateTaxAnnual / periodsPerYear;
      document.getElementById('statePerPayCell').textContent = '-' + fmt.format(statePerPay);
      document.getElementById('stateAnnualCell').textContent = '-' + fmt.format(stateTaxAnnual);

      const ssPerPay = ssTaxAnnual / periodsPerYear;
      document.getElementById('ssPerPayCell').textContent = '-' + fmt.format(ssPerPay);
      document.getElementById('ssAnnualCell').textContent = '-' + fmt.format(ssTaxAnnual);

      const medicarePerPay = medicareTaxAnnual / periodsPerYear;
      document.getElementById('medicarePerPayCell').textContent = '-' + fmt.format(medicarePerPay);
      document.getElementById('medicareAnnualCell').textContent = '-' + fmt.format(medicareTaxAnnual);

      document.getElementById('posttaxPerPayCell').textContent = '-' + fmt.format(posttaxPerPay);
      document.getElementById('posttaxAnnualCell').textContent = '-' + fmt.format(posttaxAnnual);

      document.getElementById('netPerPayCell').textContent = fmt.format(netPerPay);
      document.getElementById('netAnnualCell').textContent = fmt.format(netAnnual);

      document.getElementById('netPerPayDisplay').textContent = fmt.format(netPerPay);
      document.getElementById('netSubDisplay').innerHTML =
        `Per paycheck ¬∑ Monthly: <strong>${fmt.format(netMonthly)}</strong> ¬∑ Yearly: <strong>${fmt.format(netAnnual)}</strong>`;

      document.getElementById('resultFootnote').innerHTML =
        `Based on your inputs, we estimated federal, state, and FICA taxes plus your selected deductions. This is a rough estimate only and may differ from your actual paychecks.`;
    }

    // UI wiring
    document.addEventListener('DOMContentLoaded', () => {
      const payTypeRow = document.getElementById('payTypeRow');
      const salaryRow = document.getElementById('salaryRow');
      const hourlyRow = document.getElementById('hourlyRow');

      payTypeRow.addEventListener('change', (e) => {
        if (e.target.name === 'payType') {
          const value = e.target.value;
          const chips = payTypeRow.querySelectorAll('.radio-chip');
          chips.forEach(chip => chip.classList.remove('active'));
          e.target.closest('.radio-chip').classList.add('active');

          if (value === 'salary') {
            salaryRow.style.display = 'flex';
            hourlyRow.style.display = 'none';
          } else {
            salaryRow.style.display = 'none';
            hourlyRow.style.display = 'flex';
          }
        }
      });

      // Toggle sections
      const pretaxToggle = document.getElementById('pretaxToggle');
      const pretaxContent = document.getElementById('pretaxContent');
      pretaxToggle.addEventListener('click', () => {
        const open = pretaxContent.classList.toggle('open');
        pretaxToggle.classList.toggle('open', open);
      });

      const posttaxToggle = document.getElementById('posttaxToggle');
      const posttaxContent = document.getElementById('posttaxContent');
      posttaxToggle.addEventListener('click', () => {
        const open = posttaxContent.classList.toggle('open');
        posttaxToggle.classList.toggle('open', open);
      });

      document.getElementById('calculateBtn').addEventListener('click', calculate);

      // Set footer year
      const yearSpan = document.getElementById('yearSpan');
      if (yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
      }
    });
  </script>
</body>
</html>
